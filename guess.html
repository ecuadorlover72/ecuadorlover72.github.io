<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Country Guessing Game</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
    html, body { margin: 0; height: 100%; font-family: Arial, sans-serif; }
    #map { height: 100%; margin-left: 320px; }

    #sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: 320px;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        padding: 16px;
        box-shadow: 2px 0 8px rgba(0,0,0,0.2);
        overflow-y: auto;
    }

    #country-input {
        width: 100%;
        font-size: 16px;
        padding: 10px 12px;
        border-radius: 6px;
        border: 1px solid #aaa;
        outline: none;
        margin-bottom: 16px;
    }

    #country-input:focus {
        border-color: #007bff;
        box-shadow: 0 0 6px rgba(0,123,255,0.5);
    }

    h3 {
        margin: 8px 0 4px;
        font-size: 16px;
    }

    ul {
        list-style: none;
        padding-left: 10px;
        margin-bottom: 12px;
        max-height: 100px;
        overflow-y: auto;
    }

    ul li {
        background: #007bff;
        color: white;
        padding: 2px 6px;
        border-radius: 4px;
        margin: 2px 0;
        font-size: 14px;
    }
</style>
</head>
<body>

<div id="sidebar">
    <input id="country-input" type="text" placeholder="Type a country..." autocomplete="off">
    <div id="continent-lists">
        <h3>Africa</h3><ul id="africa"></ul>
        <h3>Asia</h3><ul id="asia"></ul>
        <h3>Europe</h3><ul id="europe"></ul>
        <h3>North America</h3><ul id="north-america"></ul>
        <h3>South America</h3><ul id="south-america"></ul>
        <h3>Oceania</h3><ul id="oceania"></ul>
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map("map").setView([20, 0], 2);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { maxZoom: 5 }).addTo(map);

let countryLookup = {};
let aliasLookup = {};
let guessedCountries = [];

// Country aliases
const aliases = {
    "united states of america": ["usa", "u.s.a", "us", "u.s", "america"],
    "united kingdom": ["uk", "u.k", "britain", "england"],
    "russia": ["russian federation"],
    "south korea": ["korea", "republic of korea", "rok"],
    "north korea": ["dprk", "democratic people's republic of korea"],
    "china": ["prc", "people's republic of china"],
    "vatican city": ["holy see"],
    "iran": ["iran, islamic republic of"],
    "syria": ["syrian arab republic"],
    "tanzania": ["tanzania, united republic of"],
    "moldova": ["republic of moldova"],
    "bolivia": ["bolivia, plurinational state of"],
    "venezuela": ["venezuela, bolivarian republic of"],
    "laos": ["lao people's democratic republic"]
};

// Continent mapping (simplified, you can refine as needed)
const countryContinents = {
    "africa": ["algeria","nigeria","egypt","tanzania","south africa"], 
    "asia": ["china","india","japan","south korea","north korea","iran","syria"],
    "europe": ["france","germany","russia","uk","vatican city","moldova"],
    "north-america": ["canada","usa","mexico"],
    "south-america": ["brazil","argentina","venezuela","bolivia"],
    "oceania": ["australia","new zealand"]
};

// Load countries
fetch("https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json")
    .then(res => res.json())
    .then(data => {
        L.geoJSON(data, {
            style: { color: "#444", weight: 1, fillColor: "#cccccc", fillOpacity: 0.5 },
            onEachFeature: (feature, layer) => {
                const official = feature.properties.name.toLowerCase();
                countryLookup[official] = layer;

                // Add aliases
                if (aliases[official]) {
                    aliases[official].forEach(alias => {
                        aliasLookup[alias.toLowerCase()] = official;
                    });
                }
            }
        }).addTo(map);
    });

const input = document.getElementById("country-input");

input.addEventListener("keyup", () => {
    let guess = input.value.trim().toLowerCase();
    let officialGuess = aliasLookup[guess] || guess;

    if (countryLookup[officialGuess] && !guessedCountries.includes(officialGuess)) {
        const layer = countryLookup[officialGuess];
        layer.setStyle({ fillColor: "green", fillOpacity: 0.85 });
        guessedCountries.push(officialGuess);

        addCountryToContinent(officialGuess);

        input.value = "";
    }
});

function addCountryToContinent(country) {
    for (let continent in countryContinents) {
        if (countryContinents[continent].includes(country)) {
            const ul = document.getElementById(continent);
            const li = document.createElement("li");
            li.textContent = capitalize(country);
            ul.appendChild(li);
            break;
        }
    }
}

function capitalize(str) {
    return str.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
}
</script>
</body>
</html>
