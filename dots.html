<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Capital Conquest ‚Äì Map Mode</title>
<style>
    body {
        background: #111;
        color: white;
        font-family: Arial;
        text-align: center;
    }
    canvas {
        border: 2px solid #444;
        background: #2e3b2f;
        cursor: crosshair;
    }
    button {
        padding: 10px;
        margin: 5px;
    }
</style>
</head>

<body>

<h1>üåç Capital Conquest</h1>

<input id="playerName" placeholder="Your Land Name">
<button onclick="startGame()">Start</button>

<p id="info"></p>

<canvas id="map" width="800" height="400"></canvas>

<div>
    <button onclick="declareWar()">Declare War</button>
    <button onclick="advance()">Advance</button>
    <button onclick="retreat()">Retreat</button>
    <button onclick="startPeace()">Peace Deal (Draw Border)</button>
</div>

<script>
const canvas = document.getElementById("map");
const ctx = canvas.getContext("2d");

let playerName = "";
let aiName = "Red Dominion";
let atWar = false;
let drawingPeace = false;
let borderX = 400;

let userDots = [];
let enemyDots = [];

// Create units
for (let i = 0; i < 15; i++) {
    userDots.push({ x: 150 + Math.random()*80, y: 50 + Math.random()*300 });
    enemyDots.push({ x: 550 + Math.random()*80, y: 50 + Math.random()*300 });
}

function startGame() {
    playerName = document.getElementById("playerName").value || "Blue Republic";
    updateInfo();
    drawMap();
}

function updateInfo() {
    document.getElementById("info").innerText =
        `${playerName} (Blue) vs ${aiName} (Red) ‚Äî ${atWar ? "‚öî WAR" : "üïä PEACE"}`;
}

function drawMap() {
    // Earth-like base
    ctx.fillStyle = "#3a5f3a";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Territory
    ctx.fillStyle = "#1e3f8a";
    ctx.fillRect(0,0,borderX,canvas.height);

    ctx.fillStyle = "#8a1e1e";
    ctx.fillRect(borderX,0,canvas.width-borderX,canvas.height);

    // Border line
    ctx.strokeStyle = "white";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(borderX,0);
    ctx.lineTo(borderX,canvas.height);
    ctx.stroke();

    // Draw units
    userDots.forEach(d => drawDot(d.x,d.y,"cyan"));
    enemyDots.forEach(d => drawDot(d.x,d.y,"red"));
}

function drawDot(x,y,color){
    ctx.beginPath();
    ctx.arc(x,y,5,0,Math.PI*2);
    ctx.fillStyle = color;
    ctx.fill();
}

function declareWar() {
    atWar = true;
    updateInfo();
}

function advance() {
    if (!atWar) return;

    borderX += 20;
    userDots.forEach(d => d.x += 15);
    enemyDots.forEach(d => d.x += Math.random()*-10);

    drawMap();
}

function retreat() {
    if (!atWar) return;

    borderX -= 20;
    userDots.forEach(d => d.x -= 15);

    drawMap();
}

function startPeace() {
    atWar = false;
    drawingPeace = true;
    updateInfo();
}

canvas.addEventListener("mousedown", e => {
    if (!drawingPeace) return;

    const rect = canvas.getBoundingClientRect();
    borderX = e.clientX - rect.left;
    drawingPeace = false;

    drawMap();
});
</script>

</body>
</html>
