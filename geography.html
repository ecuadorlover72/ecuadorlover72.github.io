<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Country Guessing Game</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <style>
        html, body { margin: 0; height: 100%; }
        #map { height: 100%; }
        #input-box {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        #country-input {
            width: 300px;
            font-size: 18px;
            padding: 8px;
        }
    </style>
</head>
<body>

<div id="map"></div>

<div id="input-box">
    <input id="country-input" type="text" placeholder="Type a country..." autocomplete="off">
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    const map = L.map("map").setView([20, 0], 2);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 5
    }).addTo(map);

    let countryLookup = {};        // official names → layer
    let aliasLookup = {};          // short names → official names

    // List of alternate country names
    const aliases = {
        "united states": ["usa", "u.s.a", "us", "u.s", "america"],
        "united kingdom": ["uk", "u.k", "britain", "england"],
        "russia": ["russian federation"],
        "south korea": ["korea", "republic of korea", "rok"],
        "north korea": ["dprk", "democratic people's republic of korea"],
        "china": ["prc", "people's republic of china"],
        "vatican city": ["holy see"],
        "iran": ["iran, islamic republic of"],
        "syria": ["syrian arab republic"],
        "tanzania": ["tanzania, united republic of"],
        "moldova": ["republic of moldova"],
        "bolivia": ["bolivia, plurinational state of"],
        "venezuela": ["venezuela, bolivarian republic of"],
        "laos": ["lao people's democratic republic"]
        // You can add more as needed
    };

    // Load GeoJSON country borders
    fetch("https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json")
        .then(res => res.json())
        .then(data => {

            L.geoJSON(data, {
                style: {
                    color: "#444",
                    weight: 1,
                    fillColor: "#cccccc",
                    fillOpacity: 0.5
                },
                onEachFeature: (feature, layer) => {
                    const official = feature.properties.name.toLowerCase();

                    // No popup → NO country name shown
                    // No hover handler

                    countryLookup[official] = layer;

                    // Add aliases for this specific country
                    if (aliases[official]) {
                        aliases[official].forEach(alias => {
                            aliasLookup[alias.toLowerCase()] = official;
                        });
                    }
                }
            }).addTo(map);
        });

    const input = document.getElementById("country-input");

    input.addEventListener("keyup", () => {
        let guess = input.value.trim().toLowerCase();

        let officialGuess = guess;

        // Convert alias → official name
        if (aliasLookup[guess]) {
            officialGuess = aliasLookup[guess];
        }

        // If country exists (either official name or alias)
        if (countryLookup[officialGuess]) {
            const layer = countryLookup[officialGuess];

            // Highlight
            layer.setStyle({
                fillColor: "green",
                fillOpacity: 0.85
            });

            // Clear search bar
            input.value = "";
        }
    });
</script>

</body>
</html>
